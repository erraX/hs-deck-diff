(this["webpackJsonphs-deck-diff"]=this["webpackJsonphs-deck-diff"]||[]).push([[0],{14:function(e,t,a){e.exports={DeckCodeInput:"DeckCodeInput_DeckCodeInput__3qdNe",Input:"DeckCodeInput_Input__2gG9Z",InputErrorHint:"DeckCodeInput_InputErrorHint__2fmgI"}},17:function(e,t,a){e.exports={textarea:"TextArea_textarea__1dygG",error:"TextArea_error__3swG2"}},18:function(e,t,a){e.exports={deckDiffContainer:"DeckDiffContainer_deckDiffContainer__mXjKY",deckContainer:"DeckDiffContainer_deckContainer__we-Em"}},20:function(e,t,a){e.exports={App:"App_App__15LM-",Title:"App_Title__274rc"}},35:function(e,t,a){e.exports={deck:"Deck_deck__1_MdY"}},43:function(e,t,a){},6:function(e,t,a){e.exports={cardBrief:"CardBrief_cardBrief__2pgcS",cardDetail:"CardBrief_cardDetail__2PVg1",name:"CardBrief_name__1G0cI",info:"CardBrief_info__3Mcow",count:"CardBrief_count__1vIB0",img:"CardBrief_img__2C9-G",mask:"CardBrief_mask__tl8UJ",addMask:"CardBrief_addMask__3NNQH",removeMask:"CardBrief_removeMask__2ML6i"}},66:function(e,t,a){"use strict";a.r(t);var n,c=a(2),r=a.n(c),o=a(31),i=a.n(o),d=(a(43),a(38)),s=a(16),u=a.n(s),l=a(5),f=a(7),j=a(32),p=a(9),b=a(70),O=a(33),_=a.n(O),v=a(8),h=a.n(v),m=a(34);!function(e){e[e.COMMON=1]="COMMON",e[e.EPIC=4]="EPIC",e[e.LEGENDARY=5]="LEGENDARY",e[e.RARE=3]="RARE"}(n||(n={}));var C,k=a(6),x=a.n(k),g=a(0),N=(C={},Object(l.a)(C,n.COMMON,"#858585"),Object(l.a)(C,n.EPIC,"#644c82"),Object(l.a)(C,n.RARE,"#315376"),Object(l.a)(C,n.LEGENDARY,"#855c25"),C),D=function(e){var t=e.id,a=e.name,n=e.cost,c=e.rarity,r=e.count,o=void 0===r?1:r,i=e.isAdd,d=void 0!==i&&i,s=e.isDelete,u=void 0!==s&&s;return Object(g.jsxs)("div",{className:x.a.cardBrief,"data-for":"card-detail-".concat(t),"data-tip":!0,"data-class":x.a.cardDetail,style:{backgroundImage:"url(https://art.hearthstonejson.com/v1/tiles/".concat(t,".png)")},children:[Object(g.jsx)(m.a,{id:"card-detail-".concat(t),place:"right",type:"light",effect:"float",getContent:function(){return Object(g.jsx)("img",{src:"https://art.hearthstonejson.com/v1/render/latest/zhCN/256x/".concat(t,".png"),alt:"card"})}}),Object(g.jsx)("span",{className:x.a.name,children:a}),Object(g.jsx)("span",{className:x.a.info,style:{backgroundColor:N[c]},children:n}),o>1&&Object(g.jsx)("span",{className:x.a.count,children:o}),d&&Object(g.jsx)("span",{className:h()(x.a.mask,x.a.addMask)}),u&&Object(g.jsx)("span",{className:h()(x.a.mask,x.a.removeMask)})]})},I=a(35),E=a.n(I),M=function(e){var t=e.cards;return Object(g.jsx)("div",{className:E.a.deck,children:t.map((function(e){return Object(g.jsx)(D,{id:e.id,name:e.name,cost:e.cost,count:e.count,rarity:e.rarity,isAdd:e.add,isDelete:e.delete},"".concat(e.id,"-").concat(!!e.add,"-").concat(!!e.delete))}))})},A=a(17),B=a.n(A),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className,a=void 0===t?"":t,n=(e.defaultValue,e.disabled),c=void 0!==n&&n,r=e.error,o=void 0===r||r,i=e.placeholder,d=void 0===i?"":i,s=e.readOnly,u=void 0!==s&&s,f=e.value,j=void 0===f?"":f,p=e.onChange,b=void 0===p?function(){}:p;return Object(g.jsx)("textarea",{className:h()([B.a.textarea,a],Object(l.a)({},B.a.error,o)),placeholder:d,disabled:c,readOnly:u,value:j,onChange:function(e){return b(e.target.value)}})},R=function(){};var G=a(36),w=function(e){var t=null;if("string"!==typeof e)return t;try{t=Object(G.a)(e.replace(/^#.*/gm,""))}catch(a){console.error("decode deck code error:",a)}return t},L=a(14),P=a.n(L),S=function(e){var t=e.onDecode,a=void 0===t?R:t,n=function(e){var t=e.initialValue,a=void 0===t?"":t,n=e.initialError,r=void 0!==n&&n,o=e.validate,i=void 0===o?function(){return!1}:o,d=e.onValidChange,s=void 0===d?R:d,u=Object(c.useState)(a),l=Object(p.a)(u,2),f=l[0],j=l[1],b=Object(c.useState)(r),O=Object(p.a)(b,2),_=O[0],v=O[1];return{value:f,error:_,handleInput:Object(c.useCallback)((function(e){var t=i(e);t||s(e),j(e),v(t)}),[i,s])}}({validate:function(e){return null===w(e)&&"invalid deck code"},onValidChange:function(e){return a(w(e))}}),r=n.value,o=n.error,i=n.handleInput;return Object(g.jsxs)("div",{className:P.a.DeckCodeInput,children:[Object(g.jsx)(y,{className:h()(P.a.Input),placeholder:"Please input deck code",value:r,error:!!o,onChange:i}),!!o&&Object(g.jsx)("span",{className:P.a.InputErrorHint,children:o})]})},T=a(18),H=a.n(T);function V(e,t){var a=Object(d.a)(t);return t.forEach((function(t){var n=Object(b.a)(e,(function(e){return e.uid===t.uid}));n?1===n.count&&2===t.count&&(t.count=1,a.push(Object(f.a)(Object(f.a)({},t),{},{add:!0}))):t.add=!0})),e.forEach((function(e){var n=Object(b.a)(t,(function(t){return t.uid===e.uid}));n?2===e.count&&1===n.count&&a.push(Object(f.a)(Object(f.a)({},e),{},{count:1,delete:!0})):a.push(Object(f.a)(Object(f.a)({},e),{},{delete:!0}))})),a.sort((function(e,t){return Number(e.cost)-Number(t.cost)||Number(e.uid)-Number(t.uid)}))}var Y=function(){var e=Object(c.useState)([]),t=Object(p.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)([]),o=Object(p.a)(r,2),i=o[0],d=o[1],s=function(){var e=Object(j.a)(u.a.mark((function e(t,c){var r,o,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deck",c),r=c.cards.reduce((function(e,t){return Object(f.a)(Object(f.a)({},e),{},Object(l.a)({},t[0],t[1]))}),{}),e.next=4,_.a.post("/card/get",{ids:c.cards.map((function(e){return e[0]}))});case 4:o=e.sent,s=o.data.data.map((function(e){return e.count=r[e.uid],e})),console.log("parsedCards",s),0===t?(n(s),i.length&&d(V(s,i))):1===t&&(d(s),a.length&&d(V(a,s)));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:H.a.deckDiffContainer,children:[Object(g.jsxs)("div",{className:H.a.deckContainer,children:[Object(g.jsx)(S,{onDecode:function(e){return s(0,e)}}),Object(g.jsx)(M,{cards:a})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)(S,{onDecode:function(e){return s(1,e)}}),Object(g.jsx)(M,{cards:i})]})]})},F=a(20),J=a.n(F),q=function(){return Object(g.jsxs)("div",{className:J.a.App,children:[Object(g.jsx)("h1",{className:J.a.Title,children:"Hearthstone deck diff"}),Object(g.jsx)(Y,{})]})},z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,71)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),r(e),o(e)}))};i.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(q,{})}),document.getElementById("root")),z()}},[[66,1,2]]]);
//# sourceMappingURL=main.cbd7e3b1.chunk.js.map